---
import { getToolStaticPaths } from '@inbrowserapp/tools-registry'
import { translateMeta } from '@inbrowserapp/tools-i18n'
import type { SupportedLanguage, ToolRouteProps, ToolComponent } from '@inbrowserapp/tools-shared'
import ToolLayout from '../../layouts/ToolLayout.astro'

export async function getStaticPaths() {
  const paths = await getToolStaticPaths()
  return paths.map((p) => ({
    params: p.params,
    props: { ...p.props, lang: 'en' as const },
  }))
}

type Props = ToolRouteProps & { lang: SupportedLanguage }
const { metadata, component: loadComponent, lang } = Astro.props as Props
const meta = translateMeta(metadata, lang)
const Component = (await loadComponent()).default as ToolComponent
---

<ToolLayout title={meta.i18n.name} description={meta.i18n.description} lang={lang}>
  <Component i18n={meta.i18n} lang={lang} />
</ToolLayout>
